# 面试题5：替换空格

## 题目
请实现一个函数，将一个字符串中的每个空格替换成“%20”。例如，当字符串为We Are Happy.则经过替换之后的字符串为We%20Are%20Happy。

## 方法
### 1. 时间复杂度为$O(n^2)$的方法
从头到尾遍历字符串，每次碰到空格字符的适合进行替换。由于把一个字符替换成3个字符，因此必须把空格后面所有的字符都后移2字节。    
假设字符串的长度为n，对每个空格字符，需要移动后面$O(n)$个字符。因此对于含有$O(n)$个空格字符的字符串来说，总时间复杂度为$O(n^2)$

### 2. 时间复杂度为$O(n)$的方法
先遍历一次字符串。统计出字符串中空格的总数，由于可以计算出替换之后字符串的总长度（每替换一个空格，长度增加2）。  
之后从字符串的后面开始复制和替换。准备两个指针p1和p2，，分别指向原字符串末尾和替换后字符串的末尾。接着向前移动指针p1，逐个把它指向的字符复制到p2指向的位置，直到碰到第一个空格为止。当碰到第一个空格时，p1向前移动一格，并在p2前插入字符串“%20”，与此同时，p2也向前移动三格。直到p1和p2相遇时，所有空格都已替换完毕。
## 代码
```java
public String replaceSpace(StringBuffer str) {
    if(str == null)
        return "";
    //先统计字符串str中的空格数量,记录为count
    int count = 0;
    for(int i = 0; i < str.length(); i++){
        if(str.charAt(i) == ' ')
            count++;
    }
    //准备两个指针p1和p2，分别指向原字符串末尾和替换后字符串的末尾
    int p1 = str.length() - 1;
    int p2 = str.length() - 1 + count * 2;

    for(int i = 0; i < count * 2; i++){
        str.append('0');
    }

    while(p1 != p2){
        if(str.charAt(p1) != ' ') {
            str.setCharAt(p2, str.charAt(p1));
            p2--;
            p1--;
        }
        else{
            p1--;
            str.setCharAt(p2--, '0');
            str.setCharAt(p2--, '2');
            str.setCharAt(p2--, '%');
        }
    }
    return str.toString();
}
```

### 测试用例
* 输入的字符串包含空格（空格分别位于字符串首、尾、中间）
* 输入的字符串不包含空格
* 特殊输入测试（空字符串、只有一个空格的字符串、有连续多个空格的字符串）

### 总结
在合并两个数组（包含字符串）时，如果从前往后复制每一个元素，则需要重复移动后面的元素多次。这时可以考虑从后往前复制，从而减少移动的次数。
